# friendly message to start the session
fortune | cowsay

# Enable Powerlevel10k instant prompt. Should stay close to the top of ~/.zshrc.
# Initialization code that may require console input (password prompts, [y/n]
# confirmations, etc.) must go above this block; everything else may go below.
if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
  source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi

# antigen setup
source {{ .chezmoi.homeDir }}/.antigen.zsh
antigen init {{ .chezmoi.homeDir }}/.antigenrc

# ZSH environment variables
export BULLETTRAIN_PROMPT_ORDER=(
  virtualenv
  aws
  go
  git
  context
  dir
  status
  cmd_exec_time
)

export BULLETTRAIN_VIRTUALENV_BG=red
export BULLETTRAIN_GIT_BG=green

# Don't autoupdate zsh; chezmoi will update plugins for us
DISABLE_AUTO_UPDATE="true"

# display red dots whilst waiting for completion.
COMPLETION_WAITING_DOTS="true"

# Uncomment the following line if you want to disable marking untracked files
# under VCS as dirty. This makes repository status check for large repositories
# much, much faster.
DISABLE_UNTRACKED_FILES_DIRTY="true"

# Preferred editor for local and remote sessions
if [[ -n $SSH_CONNECTION ]]; then
  export EDITOR='emacs'
else
  export EDITOR='code'
fi

# ssh
export SSH_KEY_PATH="~/.ssh/id_rsa"

alias grep="ggrep"
alias time="gtime"

eval $(thefuck --alias)
alias emacs="emacs -nw"

export GOPATH=$HOME/go
export PATH=$GOPATH/bin:$PATH

export PATH="/usr/local/sbin:$PATH"

{{ if eq .chezmoi.os "linux" -}}
source /usr/share/doc/fzf/examples/key-bindings.zsh
source /usr/share/doc/fzf/examples/completion.zsh
{{ else if eq .chezmoi.os "darwin" -}}
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh
{{ end -}}

# To customize prompt, run `p10k configure` or edit ~/.p10k.zsh.
[[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh
